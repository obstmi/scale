<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>Segment Buttons</title>

    <script type="module" src="build/scale-components.esm.js"></script>
    <script nomodule src="build/scale-components.js"></script>
    <link rel="stylesheet" href="build/scale-components.css" />
    <style>
      section {
        padding: 1rem;
      }

      .bg-black {
        background: black;
        color: white;
      }
    </style>
  </head>

  <body>
    <div style="height: 40px"></div>

    <section>
      <scale-button id="toggle-button">Click here to select</scale-button>
      <div style="height: 10px"></div>
      <scale-segmented-button id="segmented-button">
        <scale-segment id="segment-alpha">Option A</scale-segment>
        <scale-segment id="segment-beta">Option B</scale-segment>
      </scale-segmented-button>
      <h4>state</h4>
      <pre id="state-display">b</pre>
    </section>

    <script>
      let selectedIndex = 1; // 0 = Option A, 1 = Option B
      const toggleButton = document.getElementById('toggle-button');
      const segmentedButton = document.getElementById('segmented-button');
      const stateDisplay = document.getElementById('state-display');

      function updateState() {
        segmentedButton.selectedIndex = selectedIndex;
        stateDisplay.textContent = selectedIndex === 0 ? 'a' : 'b';
      }

      function onClick() {
        selectedIndex = selectedIndex === 0 ? 1 : 0;
        updateState();
      }

      function onChange(event) {
        // Lies den neuen Index aus dem Event aus, falls vorhanden
        if (event.detail && typeof event.detail.selectedIndex === 'number') {
          selectedIndex = event.detail.selectedIndex;
          updateState();
        }
      }

      toggleButton.addEventListener('click', onClick);
      segmentedButton.addEventListener('scale-change', onChange);

      // Initialisieren
      updateState();
    </script>
  </body>
</html>
